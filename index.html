<!doctype html>
<html lang="kk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AnilordTV ‚Äî –ê–Ω–∏–º–µ –∫”©—Ä—É –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Å—ã</title>
  <meta name="description" content="AnilordTV: “ö–∞–∑–∞“õ—à–∞ –∞–Ω–∏–º–µ, –∂–∞–Ω—Ä–ª–∞—Ä, —Ä–µ–π—Ç–∏–Ω–≥, –∂–∞“£–∞ —ç–ø–∏–∑–æ–¥—Ç–∞—Ä –∂”ô–Ω–µ –∞–ø—Ç–∞–ª—ã“õ —Ä–µ–ª–∏–∑–¥–µ—Ä. –ö”©—Ä—É, –±–∞“ì–∞–ª–∞—É, –ø—ñ–∫—ñ—Ä “õ–∞–ª–¥—ã—Ä—É." />

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            brand: { DEFAULT: "#7C3AED", dark: "#5B21B6", light: "#C4B5FD" }
          }
        }
      }
    }
  </script>
  <style>
    /* –ñ“±–ª–¥—ã–∑ –∏–∫–æ–Ω–∫–∞–ª–∞—Ä—ã “Ø—à—ñ–Ω –∫—ñ—à–∫–µ–Ω–µ —Å—Ç–∏–ª–∏ */
    .star { width: 22px; height: 22px; cursor: pointer; color: #FBBF24; }
    .star.off { color: #4B5563; }
    .line-clamp-2{ display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden }
    .scrollbar-thin::-webkit-scrollbar{height:6px;width:6px}
    .scrollbar-thin::-webkit-scrollbar-thumb{background:#4b5563;border-radius:8px}
  </style>
</head>
<body class="bg-zinc-950 text-zinc-100">
  <!-- Top bar -->
  <header class="sticky top-0 z-50 bg-zinc-900/80 backdrop-blur border-b border-zinc-800">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 flex items-center gap-4">
      <!-- Logo -->
      <a href="#" class="flex items-center gap-2 font-bold text-xl">
        <span class="inline-flex w-8 h-8 rounded bg-brand items-center justify-center">üú≤</span>
        <span>AnilordTV</span>
      </a>

      <!-- Left nav -->
      <nav class="hidden md:flex items-center gap-4 text-sm">
        <a href="#genres" class="hover:text-brand">–ñ–∞–Ω—Ä–ª–∞—Ä</a>
        <a href="#search" class="hover:text-brand">–ê–Ω–∏–º–µ —ñ–∑–¥–µ—É</a>
        <a href="#tv" class="hover:text-brand">–°–µ—Ä–∏–∞–ª–¥–∞—Ä (TV)</a>
        <a href="#movies" class="hover:text-brand">–§–∏–ª—å–º–¥–µ—Ä (OVA/ONA/Movie)</a>
        <a href="#top-rated" class="hover:text-brand">–†–µ–π—Ç–∏–Ω–≥</a>
        <a href="#new" class="hover:text-brand">–ñ–∞“£–∞</a>
        <a href="#favorites" class="hover:text-brand">–¢–∞“£–¥–∞—É–ª—ã–ª–∞—Ä—ã–º</a>
        <a href="#schedule" class="hover:text-brand">–ö–µ—Å—Ç–µ</a>
      </nav>

      <!-- Search -->
      <div id="search" class="flex-1 hidden lg:flex">
        <div class="w-full relative">
          <input id="q" type="search" class="w-full bg-zinc-800/80 border border-zinc-700 rounded-lg pl-10 pr-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-brand"
                 placeholder="–ê—Ç–∞—É—ã, —Å—Ç—É–¥–∏—è—Å—ã –Ω–µ–º–µ—Å–µ –∫–æ–¥—ã –±–æ–π—ã–Ω—à–∞ —ñ–∑–¥–µ“£—ñ–∑‚Ä¶" />
          <svg class="w-5 h-5 absolute left-3 top-2.5 text-zinc-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-width="2" d="m21 21-4.3-4.3M10 18a8 8 0 1 1 0-16 8 8 0 0 1 0 16Z"/></svg>
        </div>
      </div>

      <!-- Quick filters trigger (mobile) -->
      <button id="filtersOpen" class="md:hidden ml-auto px-3 py-2 bg-zinc-800 rounded-lg border border-zinc-700 text-sm">–°“Ø–∑–≥—ñ–ª–µ—Ä</button>

      <!-- Right user -->
      <div class="flex items-center gap-2 ml-auto">
        <a href="#auth" class="px-3 py-1.5 bg-brand/20 border border-brand/40 rounded-lg text-sm hover:bg-brand/30">–ö—ñ—Ä—É / –¢—ñ—Ä–∫–µ–ª—É</a>
        <div class="hidden sm:flex items-center gap-2 text-sm">
          <a href="#profile" class="hover:text-brand">–ü—Ä–æ—Ñ–∏–ª—å</a>
          <a href="#admin" class="hover:text-brand">”ò–∫—ñ–º—à—ñ –ø–∞–Ω–µ–ª—ñ</a>
          <div class="relative">
            <select id="lang" class="bg-zinc-800 border border-zinc-700 rounded-lg py-1.5 pl-2 pr-6 text-sm">
              <option>“ö–∞–∑–∞“õ—à–∞</option><option>–†—É—Å</option><option>Eng</option>
            </select>
          </div>
        </div>
      </div>
    </div>

    <!-- Quick Filters -->
    <div id="filtersBar" class="border-t border-zinc-800 bg-zinc-900/70">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 flex gap-3 overflow-auto scrollbar-thin">
        <select id="fGenre" class="bg-zinc-800 border border-zinc-700 rounded-lg px-3 py-2 text-sm">
          <option value="">–ñ–∞–Ω—Ä</option><option>Action</option><option>Adventure</option><option>Comedy</option>
          <option>Drama</option><option>Fantasy</option><option>Romance</option><option>Slice of Life</option>
          <option>Sci-Fi</option><option>Mystery</option><option>Horror</option><option>Sports</option>
          <option>Supernatural</option><option>Isekai</option><option>Mecha</option><option>Historical</option><option>Psychological</option>
        </select>
        <select id="fYear" class="bg-zinc-800 border border-zinc-700 rounded-lg px-3 py-2 text-sm">
          <option value="">–ñ—ã–ª—ã</option><option>2025</option><option>2024</option><option>2023</option><option>2022</option><option>2021</option>
        </select>
        <select id="fFormat" class="bg-zinc-800 border border-zinc-700 rounded-lg px-3 py-2 text-sm">
          <option value="">–§–æ—Ä–º–∞—Ç</option><option>TV</option><option>OVA</option><option>ONA</option><option>Movie</option><option>Special</option>
        </select>
        <select id="fStatus" class="bg-zinc-800 border border-zinc-700 rounded-lg px-3 py-2 text-sm">
          <option value="">–°—Ç–∞—Ç—É—Å</option><option>–ñ“Ø—Ä—ñ–ø –∂–∞—Ç—ã—Ä</option><option>–ê—è“õ—Ç–∞–ª“ì–∞–Ω</option>
        </select>
        <select id="fEL" class="bg-zinc-800 border border-zinc-700 rounded-lg px-3 py-2 text-sm">
          <option value="">EL</option><option>18+ –∂–æ“õ</option><option>18+</option>
        </select>
        <select id="fSort" class="bg-zinc-800 border border-zinc-700 rounded-lg px-3 py-2 text-sm">
          <option value="">–°“±—Ä—ã–ø—Ç–∞—É</option><option value="rating">–†–µ–π—Ç–∏–Ω–≥</option><option value="views">–ö”©—Ä—ñ–ª—ñ–º</option><option value="new">–ñ–∞“£–∞</option>
        </select>
        <button id="resetFilters" class="ml-auto px-3 py-2 text-sm border border-zinc-700 rounded-lg hover:bg-zinc-800">–¢–∞–∑–∞–ª–∞—É</button>
      </div>
    </div>
  </header>

  <!-- Hero -->
  <section class="bg-gradient-to-b from-zinc-900 to-zinc-950 border-b border-zinc-800">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 md:py-14 grid md:grid-cols-2 gap-8 items-center">
      <div>
        <h1 class="text-3xl md:text-5xl font-extrabold leading-tight">–°“Ø–π—ñ–∫—Ç—ñ –∞–Ω–∏–º–µ“£—ñ–∑–¥—ñ <span class="text-brand">“õ–∞–∑–∞“õ—à–∞</span> –∫”©—Ä—ñ“£—ñ–∑</h1>
        <p class="mt-4 text-zinc-300">–ê–ø—Ç–∞–ª—ã“õ —Ä–µ–ª–∏–∑–¥–µ—Ä, –¥”ô–ª –±–∞“ì–∞–ª–∞—É, —ã“£“ì–∞–π–ª—ã —ñ–∑–¥–µ—É –∂”ô–Ω–µ —Ç–∞“£–¥–∞—É–ª—ã–ª–∞—Ä ‚Äî –±–∞—Ä–ª—ã“ì—ã –±—ñ—Ä –∂–µ—Ä–¥–µ.</p>
        <div class="mt-6 flex flex-wrap gap-3">
          <a href="#trending" class="px-4 py-2 bg-brand rounded-lg text-white font-medium hover:bg-brand-dark">–¢—Ä–µ–Ω–¥—Ç–µ—Ä–¥—ñ –∫”©—Ä—É</a>
          <a href="#top-rated" class="px-4 py-2 border border-zinc-700 rounded-lg hover:bg-zinc-800">–ï“£ –∂–æ“ì–∞—Ä—ã —Ä–µ–π—Ç–∏–Ω–≥</a>
        </div>
        <p class="mt-3 text-xs text-zinc-400">–ï—Å–∫–µ—Ä—Ç—É: 18+ –∫–æ–Ω—Ç–µ–Ω—Ç –±–æ–ª—É—ã –º“Ø–º–∫—ñ–Ω.</p>
      </div>
      <div class="relative">
        <img alt="–ê–Ω–∏–º–µ –∫–æ–ª–ª–∞–∂" class="rounded-xl border border-zinc-800 w-full"
             src="https://images.unsplash.com/photo-1543589077-47b3b1caad37?q=80&w=1200&auto=format&fit=crop" />
        <div class="absolute -bottom-3 -right-3 bg-zinc-900/90 border border-zinc-800 rounded-lg px-4 py-2 text-sm">–ö”©—Ä—ñ–ª—ñ–º: 125.3K ‚Ä¢ –ë–∞“ì–∞: 4.8/5</div>
      </div>
    </div>
  </section>

  <!-- Weekly schedule -->
  <section id="schedule" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h2 class="text-2xl font-bold mb-4">–ê–ø—Ç–∞–ª—ã“õ —Ä–µ–ª–∏–∑–¥–µ—Ä</h2>
    <div class="grid md:grid-cols-7 gap-4">
      <!-- Days -->
      <template id="dayTpl">
        <div class="bg-zinc-900 border border-zinc-800 rounded-lg p-3">
          <h3 class="font-semibold mb-2"></h3>
          <div class="space-y-2" data-list></div>
        </div>
      </template>
    </div>
  </section>

  <!-- Trending -->
  <section id="trending" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
    <div class="flex items-center justify-between">
      <h2 class="text-2xl font-bold">–¢—Ä–µ–Ω–¥—Ç–µ—Ä (—Å–æ“£“ì—ã 7 –∫“Ø–Ω)</h2>
      <a href="#all-trending" class="text-brand hover:underline text-sm">–ë–∞—Ä–ª—ã“ì—ã–Ω –∫”©—Ä—É</a>
    </div>
    <div class="mt-4 grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4" id="trendGrid"></div>
  </section>

  <!-- New episodes -->
  <section id="new" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
    <div class="flex items-center justify-between">
      <h2 class="text-2xl font-bold">–ñ–∞“£–∞ “õ–æ—Å—ã–ª“ì–∞–Ω —ç–ø–∏–∑–æ–¥—Ç–∞—Ä</h2>
      <a href="#all-new" class="text-brand hover:underline text-sm">–ë–∞—Ä–ª—ã“ì—ã–Ω –∫”©—Ä—É</a>
    </div>
    <div class="mt-4 grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4" id="newGrid"></div>
  </section>

  <!-- Top Rated -->
  <section id="top-rated" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
    <div class="flex items-center justify-between">
      <h2 class="text-2xl font-bold">–ï“£ –∂–æ“ì–∞—Ä—ã —Ä–µ–π—Ç–∏–Ω–≥—Ç–µ–≥—ñ–ª–µ—Ä</h2>
      <a href="#ratings" class="text-brand hover:underline text-sm">–¢–æ–ª—ã“ì—ã—Ä–∞“õ</a>
    </div>
    <div class="mt-4 grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4" id="topGrid"></div>
  </section>

  <!-- Recommended -->
  <section id="recommended" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
    <div class="flex items-center justify-between">
      <h2 class="text-2xl font-bold">“∞—Å—ã–Ω—ã–ª–∞—Ç—ã–Ω–¥–∞—Ä (—Ç–∞—Ä–∏—Ö/–∂–∞–Ω—Ä –Ω–µ–≥—ñ–∑—ñ–Ω–¥–µ)</h2>
    </div>
    <div class="mt-4 grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4" id="recGrid"></div>
  </section>

  <!-- Genres -->
  <section id="genres" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h2 class="text-2xl font-bold mb-4">–ñ–∞–Ω—Ä–ª–∞—Ä</h2>
    <div class="grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4" id="genreGrid"></div>
  </section>

  <!-- Favorites (placeholder) -->
  <section id="favorites" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h2 class="text-2xl font-bold mb-3">–¢–∞“£–¥–∞—É–ª—ã–ª–∞—Ä—ã–º</h2>
    <p class="text-zinc-400">–¢—ñ–∑—ñ–º –±–æ—Å</p>
  </section>

  <!-- Anime detail modal -->
  <div id="animeModal" class="fixed inset-0 bg-black/70 hidden items-center justify-center p-4">
    <div class="bg-zinc-900 border border-zinc-800 rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
      <div class="relative">
        <img id="mBackdrop" class="w-full h-48 object-cover rounded-t-xl" alt="backdrop" />
        <button id="modalClose" class="absolute top-3 right-3 bg-black/60 hover:bg-black/80 border border-zinc-700 rounded-full p-2">‚úï</button>
      </div>
      <div class="p-4 md:p-6 grid md:grid-cols-[140px,1fr] gap-4">
        <img id="mPoster" class="rounded-lg border border-zinc-800 w-36 h-52 object-cover" alt="poster" />
        <div>
          <h3 id="mTitle" class="text-xl font-bold"></h3>
          <p id="mOriginal" class="text-sm text-zinc-400"></p>
          <div class="mt-2 flex flex-wrap gap-2 text-xs">
            <span id="mCode" class="px-2 py-1 rounded bg-zinc-800 border border-zinc-700"></span>
            <span id="mStudio" class="px-2 py-1 rounded bg-zinc-800 border border-zinc-700"></span>
            <span id="mYear" class="px-2 py-1 rounded bg-zinc-800 border border-zinc-700"></span>
            <span id="mSeason" class="px-2 py-1 rounded bg-zinc-800 border border-zinc-700"></span>
            <span id="mFormat" class="px-2 py-1 rounded bg-zinc-800 border border-zinc-700"></span>
            <span id="mStatus" class="px-2 py-1 rounded bg-zinc-800 border border-zinc-700"></span>
            <span id="mDuration" class="px-2 py-1 rounded bg-zinc-800 border border-zinc-700"></span>
          </div>

          <!-- Rating block -->
          <div class="mt-3 flex items-center gap-3">
            <div id="mStars" class="flex items-center gap-1" aria-label="–ë–∞“ì–∞–ª–∞—É"></div>
            <span id="mAvg" class="text-sm text-zinc-400"></span>
            <button id="mFav" class="ml-auto px-3 py-1.5 text-sm border border-zinc-700 rounded-lg hover:bg-zinc-800">–¢–∞“£–¥–∞—É–ª—ã–ª–∞—Ä“ì–∞ “õ–æ—Å—É</button>
          </div>

          <p id="mShort" class="mt-3 text-zinc-300"></p>
          <details class="mt-2">
            <summary class="cursor-pointer text-sm text-brand">–¢–æ–ª—ã“õ —Å–∏–ø–∞—Ç—Ç–∞–º–∞</summary>
            <p id="mFull" class="mt-2 text-zinc-300"></p>
          </details>

          <!-- Episodes -->
          <div class="mt-5">
            <h4 class="font-semibold mb-2">–≠–ø–∏–∑–æ–¥—Ç–∞—Ä</h4>
            <div id="mEpisodes" class="grid sm:grid-cols-2 gap-2"></div>
          </div>

          <!-- Comments -->
          <div class="mt-6">
            <div class="flex items-center justify-between">
              <h4 class="font-semibold">–ü—ñ–∫—ñ—Ä–ª–µ—Ä</h4>
              <select id="revSort" class="bg-zinc-800 border border-zinc-700 rounded-lg text-sm px-2 py-1.5">
                <option value="helpful">–ï“£ –ø–∞–π–¥–∞–ª—ã</option>
                <option value="new">–ñ–∞“£–∞</option>
                <option value="old">–ï—Å–∫—ñ</option>
              </select>
            </div>
            <div id="mReviews" class="mt-2 space-y-3"></div>
            <form id="reviewForm" class="mt-3">
              <textarea class="w-full bg-zinc-800 border border-zinc-700 rounded-lg p-2 text-sm" rows="3" placeholder="–ü—ñ–∫—ñ—Ä “õ–∞–ª–¥—ã—Ä—É"></textarea>
              <div class="mt-2 flex items-center gap-2">
                <label class="inline-flex items-center gap-2 text-sm"><input type="checkbox" class="accent-brand" /> –°–ø–æ–π–ª–µ—Ä</label>
                <button class="ml-auto px-3 py-1.5 bg-brand rounded-lg text-sm">–ñ—ñ–±–µ—Ä—É</button>
              </div>
              <p class="text-xs text-zinc-400 mt-1">‚Äú–ü—ñ–∫—ñ—Ä—ñ“£—ñ–∑ “õ–∞–±—ã–ª–¥–∞–Ω–¥—ã, –º–æ–¥–µ—Ä–∞—Ü–∏—è–¥–∞–Ω –∫–µ–π—ñ–Ω –∂–∞—Ä–∏—è–ª–∞–Ω–∞–¥—ã.‚Äù</p>
            </form>
          </div>

          <!-- Actions -->
          <div class="mt-6 flex flex-wrap gap-2">
            <a id="mWatch" href="#" class="px-4 py-2 bg-brand rounded-lg">–ö”©—Ä—É</a>
            <a id="mDownload" href="#" class="px-4 py-2 border border-zinc-700 rounded-lg">–ñ“Ø–∫—Ç–µ—É (1080p/720p)</a>
            <button id="mShare" class="px-4 py-2 border border-zinc-700 rounded-lg">–ë”©–ª—ñ—Å—É</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Player page (simple) -->
  <section id="player" class="hidden max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <div class="bg-zinc-900 border border-zinc-800 rounded-xl p-4">
      <video id="videoEl" class="w-full rounded-lg border border-zinc-800" controls poster="">
        <source id="vid1080" src="" type="video/mp4" />
      </video>
      <div class="mt-3 flex flex-wrap items-center gap-2">
        <span class="text-sm text-zinc-400">–°–∞–ø–∞:</span>
        <button data-q="1080p" class="qbtn px-3 py-1.5 bg-zinc-800 rounded-lg border border-zinc-700">1080p</button>
        <button data-q="720p" class="qbtn px-3 py-1.5 bg-zinc-800 rounded-lg border border-zinc-700">720p</button>
        <button data-q="480p" class="qbtn px-3 py-1.5 bg-zinc-800 rounded-lg border border-zinc-700">480p</button>
        <span class="ml-auto text-sm text-zinc-400" id="playerMsg">–ë—É—Ñ–µ—Ä–ª–µ–Ω—É–¥–µ‚Ä¶</span>
        <button id="nextEp" class="px-3 py-1.5 border border-zinc-700 rounded-lg">–ö–µ–ª–µ—Å—ñ —ç–ø–∏–∑–æ–¥</button>
        <button id="frameShot" class="px-3 py-1.5 border border-zinc-700 rounded-lg">–ö–∞–¥—Ä–ª—ã“õ —Å–∫—Ä–∏–Ω—à–æ—Ç</button>
      </div>
    </div>
  </section>

  <!-- Admin: Upload forms -->
  <section id="admin" class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-10">
    <h2 class="text-2xl font-bold mb-5">”ò–∫—ñ–º—à—ñ –ø–∞–Ω–µ–ª—ñ ‚Üí –ê–Ω–∏–º–µ –∂“Ø–∫—Ç–µ—É</h2>
    <form id="adminAnime" class="grid md:grid-cols-2 gap-4 bg-zinc-900 border border-zinc-800 rounded-xl p-4">
      <div class="md:col-span-2 grid sm:grid-cols-2 gap-4">
        <div><label class="text-sm">–ê—Ç–∞—É—ã*</label><input required class="w-full bg-zinc-800 border border-zinc-700 rounded-lg p-2" /></div>
        <div><label class="text-sm">–¢“Ø–ø–Ω“±—Å“õ–∞ –∞—Ç–∞—É—ã</label><input class="w-full bg-zinc-800 border border-zinc-700 rounded-lg p-2" /></div>
        <div><label class="text-sm">–ö–æ–¥* (–º—ã—Å: aot-s1)</label><input required pattern="[a-z0-9-]+" class="w-full bg-zinc-800 border border-zinc-700 rounded-lg p-2" /></div>
        <div><label class="text-sm">–°—Ç—É–¥–∏—è</label><input class="w-full bg-zinc-800 border border-zinc-700 rounded-lg p-2" placeholder="–º—ã—Å: MAPPA" /></div>
        <div><label class="text-sm">–ñ—ã–ª—ã*</label><input required type="number" min="1960" max="2026" class="w-full bg-zinc-800 border border-zinc-700 rounded-lg p-2" /></div>
        <div><label class="text-sm">–ú–∞—É—Å—ã–º</label>
          <select class="w-full bg-zinc-800 border border-zinc-700 rounded-lg p-2"><option></option><option>Winter</option><option>Spring</option><option>Summer</option><option>Autumn</option></select>
        </div>
        <div><label class="text-sm">–§–æ—Ä–º–∞—Ç*</label>
          <select required class="w-full bg-zinc-800 border border-zinc-700 rounded-lg p-2"><option></option><option>TV</option><option>OVA</option><option>ONA</option><option>Movie</option><option>Special</option></select>
        </div>
        <div><label class="text-sm">–°—Ç–∞—Ç—É—Å</label>
          <select class="w-full bg-zinc-800 border border-zinc-700 rounded-lg p-2"><option>–ñ“Ø—Ä—ñ–ø –∂–∞—Ç—ã—Ä</option><option>–ê—è“õ—Ç–∞–ª“ì–∞–Ω</option></select>
        </div>
        <div><label class="text-sm">“∞–∑–∞“õ—Ç—ã“ì—ã (–º–∏–Ω)</label><input type="number" class="w-full bg-zinc-800 border border-zinc-700 rounded-lg p-2" /></div>
        <div><label class="text-sm">–ñ–∞–Ω—Ä–ª–∞—Ä*</label>
          <select multiple required class="w-full bg-zinc-800 border border-zinc-700 rounded-lg p-2 h-28">
            <option>Action</option><option>Adventure</option><option>Comedy</option><option>Drama</option><option>Fantasy</option><option>Romance</option><option>Slice of Life</option><option>Sci-Fi</option><option>Mystery</option><option>Horror</option><option>Sports</option><option>Supernatural</option><option>Isekai</option><option>Mecha</option><option>Historical</option><option>Psychological</option>
          </select>
        </div>
        <div class="md:col-span-2"><label class="text-sm">“ö—ã—Å“õ–∞—à–∞ —Å–∏–ø–∞—Ç—Ç–∞–º–∞</label><textarea class="w-full bg-zinc-800 border border-zinc-700 rounded-lg p-2" rows="2"></textarea></div>
        <div class="md:col-span-2"><label class="text-sm">–¢–æ–ª—ã“õ —Å–∏–ø–∞—Ç—Ç–∞–º–∞ (HTML/Markdown)</label><textarea class="w-full bg-zinc-800 border border-zinc-700 rounded-lg p-2" rows="4"></textarea></div>
        <div><label class="text-sm">–ü–æ—Å—Ç–µ—Ä —Å—É—Ä–µ—Ç* (jpg/png/webp)</label><input type="url" required class="w-full bg-zinc-800 border border-zinc-700 rounded-lg p-2" /></div>
        <div><label class="text-sm">–§–æ–Ω —Å—É—Ä–µ—Ç</label><input type="url" class="w-full bg-zinc-800 border border-zinc-700 rounded-lg p-2" /></div>
        <div><label class="text-sm">–¢”ô–∫—Ç–µ–≥—ñ–ª–µ—Ä</label><input class="w-full bg-zinc-800 border border-zinc-700 rounded-lg p-2" /></div>
        <div><label class="text-sm">–ï—Ä–µ—Å–µ–∫ –∫–æ–Ω—Ç–µ–Ω—Ç?</label>
          <select class="w-full bg-zinc-800 border border-zinc-700 rounded-lg p-2"><option>–ñ–æ“õ</option><option>–ò”ô</option></select>
        </div>
        <div><label class="text-sm">–ë–∞—Å—Ç–∞–ø“õ—ã –∫”©—Ä—ñ–ª—ñ–º</label><input type="number" min="0" value="0" class="w-full bg-zinc-800 border border-zinc-700 rounded-lg p-2" /></div>
      </div>
      <div class="md:col-span-2 flex gap-2">
        <button class="px-4 py-2 bg-brand rounded-lg">–°–∞“õ—Ç–∞—É</button>
        <button type="reset" class="px-4 py-2 border border-zinc-700 rounded-lg">–ë–æ–ª–¥—ã—Ä–º–∞—É</button>
      </div>
    </form>

    <h3 class="text-xl font-semibold mt-10 mb-3">–≠–ø–∏–∑–æ–¥ –∂“Ø–∫—Ç–µ—É</h3>
    <form id="adminEpisode" class="grid md:grid-cols-2 gap-4 bg-zinc-900 border border-zinc-800 rounded-xl p-4">
      <div><label class="text-sm">–ê–Ω–∏–º–µ*</label><input required class="w-full bg-zinc-800 border border-zinc-700 rounded-lg p-2" placeholder="ID –Ω–µ–º–µ—Å–µ –∞—Ç–∞—É—ã" /></div>
      <div><label class="text-sm">–≠–ø–∏–∑–æ–¥ ‚Ññ*</label><input required type="number" min="1" class="w-full bg-zinc-800 border border-zinc-700 rounded-lg p-2" /></div>
      <div><label class="text-sm">–ê—Ç–∞—É—ã</label><input class="w-full bg-zinc-800 border border-zinc-700 rounded-lg p-2" /></div>
      <div><label class="text-sm">–í–∏–¥–µ–æ URL* (HLS/DASH/mp4)</label><input required type="url" class="w-full bg-zinc-800 border border-zinc-700 rounded-lg p-2" /></div>
      <div><label class="text-sm">–°–∞–± —Ñ–∞–π–ª–¥–∞—Ä—ã (vtt/ass)</label><input class="w-full bg-zinc-800 border border-zinc-700 rounded-lg p-2" placeholder='[{"lang":"kk","url":"..."}]' /></div>
      <div><label class="text-sm">–ñ“Ø–∫—Ç–µ—É —Å—ñ–ª—Ç–µ–º–µ—Å—ñ</label><input type="url" class="w-full bg-zinc-800 border border-zinc-700 rounded-lg p-2" /></div>
      <div><label class="text-sm">–°–∞–ø–∞–ª–∞—Ä</label><input class="w-full bg-zinc-800 border border-zinc-700 rounded-lg p-2" placeholder='["1080p","720p","480p"]' /></div>
      <div><label class="text-sm">“∞–∑–∞“õ—Ç—ã“ì—ã (—Å–µ–∫)</label><input type="number" class="w-full bg-zinc-800 border border-zinc-700 rounded-lg p-2" /></div>
      <div><label class="text-sm">–®—ã“õ“õ–∞–Ω –∫“Ø–Ω—ñ</label><input type="date" class="w-full bg-zinc-800 border border-zinc-700 rounded-lg p-2" /></div>
      <div class="md:col-span-2 flex gap-2">
        <button class="px-4 py-2 bg-brand rounded-lg">–°–∞“õ—Ç–∞—É</button>
        <button type="reset" class="px-4 py-2 border border-zinc-700 rounded-lg">–ë–æ–ª–¥—ã—Ä–º–∞—É</button>
      </div>
    </form>
  </section>

  <!-- Profile (placeholder) -->
  <section id="profile" class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h2 class="text-2xl font-bold">–ü—Ä–æ—Ñ–∏–ª—å</h2>
    <div class="mt-4 grid md:grid-cols-2 gap-4">
      <div class="bg-zinc-900 border border-zinc-800 rounded-xl p-4">
        <h3 class="font-semibold mb-2">–ö”©—Ä–≥–µ–Ω —Ç–∞—Ä–∏—Ö—ã–º</h3>
        <p class="text-zinc-400 text-sm">–¢—ñ–∑—ñ–º –±–æ—Å</p>
      </div>
      <div class="bg-zinc-900 border border-zinc-800 rounded-xl p-4">
        <h3 class="font-semibold mb-2">–ü–∞—Ä–∞–º–µ—Ç—Ä–ª–µ—Ä</h3>
        <label class="text-sm">–¢—ñ–ª</label>
        <select class="w-full bg-zinc-800 border border-zinc-700 rounded-lg p-2 mt-1"><option>“ö–∞–∑–∞“õ—à–∞</option><option>–†—É—Å</option><option>Eng</option></select>
        <button class="mt-3 px-3 py-1.5 bg-brand rounded-lg text-sm">–°–∞“õ—Ç–∞—É</button>
        <p class="text-xs text-zinc-400 mt-2">–°”ô—Ç—Ç—ñ —Å–∞“õ—Ç–∞–ª–¥—ã</p>
      </div>
    </div>
  </section>

  <!-- Toasts -->
  <div id="toast" class="fixed bottom-4 right-4 hidden px-4 py-2 bg-zinc-900 border border-zinc-800 rounded-lg text-sm shadow-lg">–°–∞“õ—Ç–∞–ª–¥—ã!</div>

  <footer class="border-t border-zinc-800 mt-10">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 text-sm text-zinc-400">
      ¬© <span id="y"></span> AnilordTV. –ë–∞—Ä–ª—ã“õ “õ“±“õ—ã“õ—Ç–∞—Ä “õ–æ—Ä“ì–∞–ª“ì–∞–Ω.
    </div>
  </footer>

  <!-- Templates -->
  <template id="cardTpl">
    <article class="bg-zinc-900 border border-zinc-800 rounded-xl overflow-hidden hover:border-zinc-700 transition">
      <div class="relative">
        <img class="w-full h-44 object-cover" alt="poster">
        <div class="absolute left-2 top-2 text-xs px-2 py-1 rounded bg-black/60 border border-zinc-700">–ñ–∞–ª“ì–∞—Å—É–¥–∞</div>
        <div class="absolute right-2 bottom-2 text-xs px-2 py-1 rounded bg-black/60 border border-zinc-700">–ë–∞“ì–∞: 4.8/5</div>
      </div>
      <div class="p-3">
        <h3 class="font-semibold line-clamp-2"></h3>
        <p class="text-xs text-zinc-400 mt-1">–ö”©—Ä—ñ–ª—ñ–º: 125.3K</p>
        <div class="mt-3 flex gap-2">
          <button class="px-3 py-1.5 bg-brand rounded-lg text-sm">–ö”©—Ä—É</button>
          <button class="px-3 py-1.5 border border-zinc-700 rounded-lg text-sm">–ê—à—É</button>
        </div>
      </div>
    </article>
  </template>

  <template id="epTpl">
    <a class="flex items-center gap-3 bg-zinc-900 border border-zinc-800 rounded-lg p-2 hover:bg-zinc-800">
      <div class="w-28 h-16 bg-zinc-800 rounded"></div>
      <div class="flex-1">
        <div class="text-sm font-medium"></div>
        <div class="text-xs text-zinc-400">22 –º–∏–Ω ‚Ä¢ 1080p</div>
      </div>
      <span class="text-xs px-2 py-1 rounded bg-black/60 border border-zinc-700">–ñ–∞“£–∞ —ç–ø–∏–∑–æ–¥</span>
    </a>
  </template>

  <!-- Mock data + JS -->
  <script>
    const YEAR = new Date().getFullYear();
    document.getElementById('y').textContent = YEAR;

    // ------------ MOCK DATA (server/API –æ—Ä–Ω—ã–Ω–∞ ”ô–∑—ñ—Ä–≥–µ) ------------
    const ANIME = [
      { id:1, code:'aot-s1', title:'Attack on Titan S1', title_original:'Shingeki no Kyojin', studio:'WIT', year:2013, season:'Spring', format:'TV', status:'–ê—è“õ—Ç–∞–ª“ì–∞–Ω', duration:22, poster:'https://i.imgur.com/8Q6P1dQ.jpeg', backdrop:'https://i.imgur.com/3xa3Q8N.jpeg', genres:['Action','Drama'], short:'–ê–¥–∞–º–∑–∞—Ç –ø–µ–Ω —Ç–∏—Ç–∞–Ω–¥–∞—Ä —à–∞–π“õ–∞—Å—ã.', full:'–¢–æ–ª—ã“õ —Å–∏–ø–∞—Ç—Ç–∞–º–∞‚Ä¶', rating:4.7, votes:3421, views:1203991, adult:false,
        episodes:[{n:1,title:'To You, in 2000 Years',q:['1080p','720p'],url:'https://www.w3schools.com/html/mov_bbb.mp4'}],
        reviews:[{u:'@eri', body:'–ö–µ—Ä–µ–º–µ—Ç –∞—à—ã–ª—É!', up:12, down:1, t:'2024-03-01'}]
      },
      { id:2, code:'jjk', title:'Jujutsu Kaisen', title_original:'Jujutsu Kaisen', studio:'MAPPA', year:2020, season:'Autumn', format:'TV', status:'–ñ“Ø—Ä—ñ–ø –∂–∞—Ç—ã—Ä', duration:24, poster:'https://i.imgur.com/0sYkq6C.jpeg', backdrop:'https://i.imgur.com/G8Kx0c7.jpeg', genres:['Action','Supernatural'], short:'–î–∂—É–∂—É—Ü—É —Å–∏“õ—ã—Ä—ã.', full:'–¢–æ–ª—ã“õ —Å–∏–ø–∞—Ç—Ç–∞–º–∞‚Ä¶', rating:4.6, votes:2108, views:980221, adult:false,
        episodes:[{n:1,title:'Ryomen Sukuna',q:['1080p','720p','480p'],url:'https://www.w3schools.com/html/mov_bbb.mp4'}],
        reviews:[{u:'@max', body:'–°–∞–ø–∞–ª—ã –∞–Ω–∏–º–∞—Ü–∏—è!', up:8, down:0, t:'2024-04-12'}]
      },
      { id:3, code:'vos', title:'Violet Evergarden', title_original:'Violet Evergarden', studio:'Kyoto Animation', year:2018, season:'Winter', format:'TV', status:'–ê—è“õ—Ç–∞–ª“ì–∞–Ω', duration:24, poster:'https://i.imgur.com/B1yYb2D.jpeg', backdrop:'https://i.imgur.com/0bV8uKZ.jpeg', genres:['Drama','Slice of Life'], short:'–ñ“Ø—Ä–µ–∫ —Ç–µ–±—ñ—Ä–µ–Ω—Ç–µ—Ä —Ö–∏–∫–∞—è.', full:'–¢–æ–ª—ã“õ —Å–∏–ø–∞—Ç—Ç–∞–º–∞‚Ä¶', rating:4.9, votes:1502, views:720551, adult:false,
        episodes:[{n:1,title:'Episode 1',q:['1080p'],url:'https://www.w3schools.com/html/mov_bbb.mp4'}],
        reviews:[{u:'@aya', body:'–ö”©–∑–≥–µ –∂–∞—Å –∞–ª–¥—ã—Ä–∞–¥—ã.', up:23, down:2, t:'2023-12-07'}]
      },
      { id:4, code:'your-name', title:'Your Name', title_original:'Kimi no Na wa', studio:'CoMix Wave', year:2016, season:'Summer', format:'Movie', status:'–ê—è“õ—Ç–∞–ª“ì–∞–Ω', duration:106, poster:'https://i.imgur.com/8eX3fS2.jpeg', backdrop:'https://i.imgur.com/6o0nJ6l.jpeg', genres:['Romance','Fantasy'], short:'–î–µ–Ω–µ –∞—É—ã—Å—É –∂–∞–π–ª—ã —Ä–æ–º–∞–Ω—Ç–∏–∫–∞.', full:'–¢–æ–ª—ã“õ —Å–∏–ø–∞—Ç—Ç–∞–º–∞‚Ä¶', rating:4.8, votes:5402, views:1520991, adult:false,
        episodes:[{n:1,title:'Movie',q:['1080p','720p'],url:'https://www.w3schools.com/html/mov_bbb.mp4'}],
        reviews:[{u:'@nur', body:'”ò—É–µ–Ω—ñ –∫–µ—Ä–µ–º–µ—Ç!', up:17, down:1, t:'2022-05-11'}]
      },
      { id:5, code:'horimiya', title:'Horimiya', title_original:'Horimiya', studio:'CloverWorks', year:2021, season:'Winter', format:'TV', status:'–ê—è“õ—Ç–∞–ª“ì–∞–Ω', duration:23, poster:'https://i.imgur.com/V0ZJZg9.jpeg', backdrop:'https://i.imgur.com/5kXo7bJ.jpeg', genres:['Romance','Slice of Life'], short:'–ú–µ–∫—Ç–µ–ø—Ç–µ–≥—ñ –º–∞—Ö–∞–±–±–∞—Ç.', full:'–¢–æ–ª—ã“õ —Å–∏–ø–∞—Ç—Ç–∞–º–∞‚Ä¶', rating:4.5, votes:999, views:450221, adult:false,
        episodes:[{n:1,title:'A Tiny Happenstance',q:['1080p','720p'],url:'https://www.w3schools.com/html/mov_bbb.mp4'}],
        reviews:[]
      }
    ];

    const DAYS = ['–î“Ø–π—Å–µ–Ω–±—ñ','–°–µ–π—Å–µ–Ω–±—ñ','–°”ô—Ä—Å–µ–Ω–±—ñ','–ë–µ–π—Å–µ–Ω–±—ñ','–ñ“±–º–∞','–°–µ–Ω–±—ñ','–ñ–µ–∫—Å–µ–Ω–±—ñ'];

    // ------------ UI HELPERS ------------
    const $ = sel => document.querySelector(sel);
    const $$ = sel => document.querySelectorAll(sel);

    function toast(msg='–°–∞“õ—Ç–∞–ª–¥—ã!'){
      const t = $('#toast');
      t.textContent = msg;
      t.classList.remove('hidden');
      setTimeout(()=>t.classList.add('hidden'), 2000);
    }

    function formatViews(n){
      return n>1e6 ? (n/1e6).toFixed(1)+'M' : n>1e3 ? (n/1e3).toFixed(1)+'K' : n;
    }

    // ------------ RENDER: schedule ------------
    (function renderSchedule(){
      const grid = document.querySelector('#schedule .grid');
      DAYS.forEach((d,i)=>{
        const node = document.getElementById('dayTpl').content.cloneNode(true);
        node.querySelector('h3').textContent = d;
        const list = node.querySelector('[data-list]');
        // –¥–µ–º–æ: –∫“Ø–Ω—ñ i —Å”ô–π–∫–µ—Å –±—ñ—Ä–Ω–µ—à–µ —Ç–∞–π—Ç–ª
        ANIME.filter((a)=> (a.id+i)%3===0).slice(0,3).forEach(a=>{
          const link = document.createElement('a');
          link.href="#";
          link.className="block text-sm text-brand hover:underline";
          link.textContent = `${a.title} ‚Äî –≠–ø ${a.episodes[0]?.n ?? 1}`;
          link.addEventListener('click', (e)=>{e.preventDefault(); openModal(a.id);});
          list.appendChild(link);
        });
        grid.appendChild(node);
      });
    })();

    // ------------ RENDER: card grids ------------
    function createCard(a){
      const node = document.getElementById('cardTpl').content.cloneNode(true);
      const img = node.querySelector('img');
      img.src = a.poster; img.alt = a.title;
      node.querySelector('h3').textContent = a.title;
      node.querySelector('.p-3 p.text-xs')?.remove;
      node.querySelector('p.text-xs').textContent = `–ö”©—Ä—ñ–ª—ñ–º: ${formatViews(a.views)}`;
      node.querySelector('.absolute.left-2').textContent = a.status==='–ñ“Ø—Ä—ñ–ø –∂–∞—Ç—ã—Ä'?'–ñ–∞–ª“ì–∞—Å—É–¥–∞':'–ê—è“õ—Ç–∞–ª“ì–∞–Ω';
      node.querySelector('.absolute.right-2').textContent = `–ë–∞“ì–∞: ${a.rating.toFixed(1)}/5`;
      const [watchBtn, openBtn] = node.querySelectorAll('button');
      watchBtn.addEventListener('click', ()=> openPlayer(a.id, 1));
      openBtn.addEventListener('click', ()=> openModal(a.id));
      return node;
    }

    function fillGrid(id, items){
      const grid = document.getElementById(id);
      grid.innerHTML = '';
      items.forEach(a=> grid.appendChild(createCard(a)));
    }

    fillGrid('trendGrid', [...ANIME].sort((a,b)=>b.views-a.views).slice(0,5));
    fillGrid('newGrid', [...ANIME].reverse().slice(0,5));
    fillGrid('topGrid', [...ANIME].sort((a,b)=> b.rating - a.rating).slice(0,5));
    fillGrid('recGrid', ANIME.filter(a=> a.genres.includes('Action') || a.genres.includes('Romance')).slice(0,5));

    // ------------ Genres ------------
    (function renderGenres(){
      const g = ['Action','Adventure','Comedy','Drama','Fantasy','Romance','Slice of Life','Sci-Fi','Mystery','Horror','Sports','Supernatural','Isekai','Mecha','Historical','Psychological'];
      const grid = document.getElementById('genreGrid');
      g.forEach(name=>{
        const card = document.createElement('article');
        card.className="bg-zinc-900 border border-zinc-800 rounded-xl p-4";
        const count = ANIME.filter(a=>a.genres.includes(name)).length;
        card.innerHTML = `
          <h3 class="font-semibold">${name}</h3>
          <p class="text-sm text-zinc-400 mt-1">–ë–∞—Ä–ª—ã“ì—ã ${count} —Ç–∞–π—Ç–ª</p>
          <button class="mt-3 px-3 py-1.5 bg-brand rounded-lg text-sm">“ö–∞—Ä–∞—É</button>
        `;
        card.querySelector('button').addEventListener('click',()=>{
          // –ñ–∞–π “ì–∞–Ω–∞ —Å“Ø–∑–≥—ñ–Ω—ñ “õ–æ–ª–¥–∞–Ω–∞–º—ã–∑
          fillGrid('trendGrid', ANIME.filter(a=>a.genres.includes(name)));
          location.hash = '#trending';
        });
        grid.appendChild(card);
      });
    })();

    // ------------ Search + Filters (–∫–ª–∏–µ–Ω—Ç–ª—ñ–∫ –¥–µ–º–æ) ------------
    $('#q').addEventListener('input', (e)=>{
      const t = e.target.value.toLowerCase();
      const list = ANIME.filter(a =>
        a.title.toLowerCase().includes(t) ||
        a.title_original.toLowerCase().includes(t) ||
        a.code.toLowerCase().includes(t) ||
        a.studio.toLowerCase().includes(t)
      );
      fillGrid('trendGrid', list);
    });

    $('#resetFilters').addEventListener('click', ()=>{
      ['#fGenre','#fYear','#fFormat','#fStatus','#fEL','#fSort'].forEach(s=> $(s).value='');
      fillGrid('trendGrid', [...ANIME].sort((a,b)=>b.views-a.views).slice(0,5));
    });

    ['#fGenre','#fYear','#fFormat','#fStatus','#fEL','#fSort'].forEach(s=>{
      $(s).addEventListener('change', applyFilters);
    });

    function applyFilters(){
      let list = [...ANIME];
      const g = $('#fGenre').value;
      const y = $('#fYear').value;
      const f = $('#fFormat').value;
      const st = $('#fStatus').value;
      const el = $('#fEL').value;
      const sort = $('#fSort').value;

      if (g) list = list.filter(a=>a.genres.includes(g));
      if (y) list = list.filter(a=>a.year==y);
      if (f) list = list.filter(a=>a.format===f);
      if (st) list = list.filter(a=>a.status===st);
      if (el) list = list.filter(a=> el==='18+' ? a.adult : !a.adult );

      if (sort==='rating') list.sort((a,b)=> b.rating - a.rating || b.votes - a.votes);
      if (sort==='views') list.sort((a,b)=> b.views - a.views);
      if (sort==='new') list = list.reverse();

      fillGrid('trendGrid', list.slice(0,20));
    }

    // ------------ Modal (Anime page) ------------
    function openModal(id){
      const a = ANIME.find(x=>x.id===id);
      if(!a) return;
      $('#mBackdrop').src = a.backdrop;
      $('#mPoster').src = a.poster;
      $('#mTitle').textContent = a.title;
      $('#mOriginal').textContent = a.title_original;
      $('#mCode').textContent = '–ö–æ–¥: '+a.code;
      $('#mStudio').textContent = '–°—Ç—É–¥–∏—è: '+a.studio;
      $('#mYear').textContent = '–ñ—ã–ª—ã: '+a.year;
      $('#mSeason').textContent = '–ú–∞—É—Å—ã–º: '+a.season;
      $('#mFormat').textContent = '–§–æ—Ä–º–∞—Ç: '+a.format;
      $('#mStatus').textContent = '–°—Ç–∞—Ç—É—Å: '+a.status;
      $('#mDuration').textContent = `“∞–∑–∞“õ—Ç—ã“ì—ã: ${a.duration} –º–∏–Ω/—ç–ø`;
      $('#mShort').textContent = a.short;
      $('#mFull').textContent = a.full;
      $('#mAvg').textContent = `–û—Ä—Ç–∞—à–∞ –±–∞“ì–∞: ${a.rating.toFixed(1)}/5 (${a.votes.toLocaleString()} –¥–∞—É—ã—Å) ‚Ä¢ –ö”©—Ä—ñ–ª—ñ–º: ${a.views.toLocaleString()}`;

      // Episodes
      const wrap = $('#mEpisodes'); wrap.innerHTML='';
      a.episodes.forEach(ep=>{
        const node = document.getElementById('epTpl').content.cloneNode(true);
        node.querySelector('.text-sm').textContent = `–≠–ø ${ep.n} ‚Äî ${ep.title||''}`;
        node.querySelector('a').addEventListener('click', (e)=>{e.preventDefault(); openPlayer(a.id, ep.n);});
        wrap.appendChild(node);
      });

      // Reviews
      const rev = $('#mReviews'); rev.innerHTML='';
      (a.reviews||[]).forEach(r=>{
        const item = document.createElement('div');
        item.className="bg-zinc-900 border border-zinc-800 rounded-lg p-3";
        item.innerHTML = `<div class="text-sm"><b>${r.u}</b> ‚Ä¢ <span class="text-zinc-500">${r.t}</span></div>
        <p class="text-sm mt-1">${r.body}</p>
        <div class="mt-2 text-xs text-zinc-400">+${r.up} / -${r.down} ‚Ä¢ <button class="underline">–ü–∞–π–¥–∞–ª–∞–Ω—É—à—ã“ì–∞ —à–∞“ì—ã–º–¥–∞–Ω—É</button></div>`;
        rev.appendChild(item);
      });

      // Rating stars (one user ‚Äî one vote via localStorage)
      renderStars('#mStars', a.id, a.rating, a.votes);

      // Actions
      $('#mWatch').onclick = ()=> openPlayer(a.id, 1);
      $('#mDownload').href = a.episodes[0]?.url || '#';
      $('#mDownload').onclick = (e)=>{ if(!a.episodes[0]?.url){ e.preventDefault(); toast('“ö–∞—Ç–µ: –±–µ–π–Ω–µ “õ–æ–ª–∂–µ—Ç—ñ–º—Å—ñ–∑'); } };
      $('#mShare').onclick = async ()=>{
        try{
          await navigator.share({title:a.title, url: location.href});
        } catch(e){ navigator.clipboard.writeText(location.href); toast('–°—ñ–ª—Ç–µ–º–µ –∫”©—à—ñ—Ä—ñ–ª–¥—ñ'); }
      };
      $('#mFav').onclick = ()=> { toast('–¢–∞“£–¥–∞—É–ª—ã–ª–∞—Ä“ì–∞ “õ–æ—Å—ã–ª–¥—ã'); };

      // Show
      $('#animeModal').classList.remove('hidden');
      $('#animeModal').classList.add('flex');
    }

    $('#modalClose').addEventListener('click', ()=> {
      $('#animeModal').classList.add('hidden');
      $('#animeModal').classList.remove('flex');
    });

    // ------------ Stars (rating) ------------
    function renderStars(sel, animeId, avg, votes){
      const wrap = document.querySelector(sel);
      wrap.innerHTML='';
      const myKey = 'rate_'+animeId;
      const myVote = Number(localStorage.getItem(myKey)) || 0;

      for(let i=1;i<=5;i++){
        const s = document.createElement('button');
        s.setAttribute('aria-label', `–ë–∞“ì–∞–ª–∞—É: ${i}`);
        s.className = 'star ' + ((myVote? i<=myVote : i<=Math.round(avg)) ? '' : 'off');
        s.innerHTML = '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>';
        s.addEventListener('click', ()=>{
          localStorage.setItem(myKey, i);
          toast(`–°—ñ–∑–¥—ñ“£ –±–∞“ì–∞“£—ã–∑: ${i} –∂“±–ª–¥—ã–∑`);
          // client-only: –≤–∏–∑—É–∞–ª–¥—ã –∂–∞“£–∞—Ä—Ç—É
          renderStars(sel, animeId, avg, votes+1);
          // –°–µ—Ä–≤–µ—Ä–≥–µ –∂—ñ–±–µ—Ä—É (–Ω–∞“õ—Ç—ã–¥–∞): POST /ratings { anime_id, stars }
        });
        wrap.appendChild(s);
      }
      const info = document.getElementById('mAvg');
      if (info) info.textContent = myVote ? `–°—ñ–∑–¥—ñ“£ –±–∞“ì–∞“£—ã–∑: ${myVote} –∂“±–ª–¥—ã–∑ ‚Ä¢ –û—Ä—Ç–∞—à–∞: ${avg.toFixed(1)} (${votes.toLocaleString()} –¥–∞—É—ã—Å)` : `–û—Ä—Ç–∞—à–∞ –±–∞“ì–∞: ${avg.toFixed(1)}/5 (${votes.toLocaleString()} –¥–∞—É—ã—Å)`;
    }

    // ------------ Player ------------
    function openPlayer(animeId, epNum){
      const a = ANIME.find(x=>x.id===animeId);
      if(!a) return;
      const ep = a.episodes.find(e=>e.n===epNum) || a.episodes[0];
      $('#player').classList.remove('hidden');
      window.scrollTo({top: $('#player').offsetTop-80, behavior:'smooth'});
      const v = document.getElementById('videoEl');
      document.getElementById('vid1080').src = ep.url;
      v.load(); v.play().catch(()=>{});
      document.getElementById('playerMsg').textContent = '–û–π–Ω–∞—É/–ü–∞—É–∑–∞';
      $('#nextEp').onclick = ()=> openPlayer(animeId, epNum+1);
      $('#frameShot').onclick = ()=> toast('–ö–∞–¥—Ä —Ç“Ø—Å—ñ—Ä—ñ–ª–¥—ñ (–¥–µ–º–æ)');
    }

    // ------------ Admin forms (demo) ------------
    document.getElementById('adminAnime').addEventListener('submit', (e)=>{
      e.preventDefault(); toast('–ê–Ω–∏–º–µ —Å–∞“õ—Ç–∞–ª–¥—ã!'); // –Ω–∞“õ—Ç—ã–¥–∞: POST /admin/anime
    });
    document.getElementById('adminEpisode').addEventListener('submit', (e)=>{
      e.preventDefault(); toast('–≠–ø–∏–∑–æ–¥ —Å–∞“õ—Ç–∞–ª–¥—ã!'); // –Ω–∞“õ—Ç—ã–¥–∞: POST /admin/episodes
    });

    // Mobile filters toggle
    document.getElementById('filtersOpen').addEventListener('click', ()=>{
      document.getElementById('filtersBar').classList.toggle('hidden');
    });
  </script>
</body>
      </html>
